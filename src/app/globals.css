@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Duolingo-inspired Palette */
    
    /* Backgrounds */
    --background-hsl: 210 20% 98%; /* Soft off-white */
    --foreground-hsl: 215 25% 27%; /* Dark Slate Gray (Not black) */
    
    /* Primary: Purple */
    --primary-hsl: 269 97% 63%;
    --primary-depth-hsl: 269 97% 50%;
    --primary-foreground-hsl: 0 0% 100%;

    /* Secondary: Cyan */
    --secondary-hsl: 199 88% 48%;
    --secondary-depth-hsl: 199 88% 38%;
    --secondary-foreground-hsl: 0 0% 100%;

    /* Success: Green */
    --success-hsl: 142 71% 45%;
    --success-depth-hsl: 142 71% 35%;
    --success-foreground-hsl: 0 0% 100%;

    /* Danger: Red */
    --destructive-hsl: 0 79% 63%;
    --destructive-depth-hsl: 0 79% 50%;
    --destructive-foreground-hsl: 0 0% 100%;

    /* Accent: Yellow/Gold */
    --accent-hsl: 46 100% 50%;
    --accent-depth-hsl: 46 100% 40%;
    --accent-foreground-hsl: 30 40% 20%;

    /* UI Surfaces */
    --card-hsl: 0 0% 100%;
    --card-foreground-hsl: 215 25% 27%;

    /* Borders for subtle separation if needed */
    --border-hsl: 215 20% 90%;
    --input-hsl: 215 20% 95%;
    --ring-hsl: 269 97% 63%;

    --radius: 1rem;
  }

  .dark {
    /* Dark Mode - Deep Blue/Gray background */
    --background-hsl: 215 25% 10%;
    --foreground-hsl: 210 20% 98%;
    
    --card-hsl: 215 25% 15%;
    --card-foreground-hsl: 210 20% 98%;
    
    --border-hsl: 215 25% 20%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html, body {
    height: 100%;
    width: 100%;
    overflow: hidden; /* Prevent body scroll, handle in containers */
    touch-action: manipulation; /* Improves touch handling */
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-nunito), sans-serif;
  }

  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-fredoka), sans-serif;
    @apply font-semibold;
  }

  /* Sub/Superscript fixes */
  sub, sup {
    font-size: 60%; /* Smaller to be distinct */
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }

  sup {
    top: -0.6em; /* Move it higher */
  }

  sub {
    bottom: -0.25em;
  }

  /* Typography utilities */
  .display-large { @apply text-4xl font-bold tracking-tight; font-family: var(--font-fredoka); }
  .display-medium { @apply text-3xl font-bold; font-family: var(--font-fredoka); }
  .title-large { @apply text-2xl font-bold; font-family: var(--font-fredoka); }
  .title-medium { @apply text-xl font-bold; font-family: var(--font-fredoka); }
  .body-medium { @apply text-base font-semibold text-slate-500; font-family: var(--font-nunito); }
}


/* COMPONENT STYLES */

/*
   Legacy Button "Push" Effect (kept for tonal/chip buttons)
   Simulates 3D depth by using a solid bottom border that disappears on active
*/
.btn-push {
  @apply relative transition-all duration-100 ease-in-out border-b-4 active:border-b-transparent active:translate-y-1;
}

/*
   New "Juicy" 3D Button Style
   Replaces btn-shine and flat colors with gradients and inner shadows
*/
.btn-juicy {
  @apply relative overflow-hidden rounded-2xl transition-all duration-100 ease-out;
  @apply flex items-center justify-center font-bold text-lg uppercase tracking-wide;
  @apply shadow-[inset_0px_4px_2px_rgba(255,255,255,0.3),inset_0px_-4px_0px_rgba(0,0,0,0.2),0px_2px_4px_rgba(0,0,0,0.2)];
  font-family: var(--font-fredoka);
}

.btn-juicy:active {
  @apply translate-y-[2px];
  @apply shadow-[inset_0px_4px_2px_rgba(255,255,255,0.3),inset_0px_-2px_0px_rgba(0,0,0,0.2),0px_1px_2px_rgba(0,0,0,0.2)];
}

/* Primary Variant (Purple) */
.btn-juicy-primary {
  background: linear-gradient(to bottom, hsl(var(--primary-hsl)), hsl(var(--primary-depth-hsl)));
  @apply text-white;
}
.btn-juicy-primary:hover {
  filter: brightness(1.1);
}

/* Success Variant (Green) */
.btn-juicy-success {
  background: linear-gradient(to bottom, hsl(var(--success-hsl)), hsl(var(--success-depth-hsl)));
  @apply text-white;
}
.btn-juicy-success:hover {
  filter: brightness(1.1);
}

/* Danger Variant (Red) */
.btn-juicy-danger {
  background: linear-gradient(to bottom, hsl(var(--destructive-hsl)), hsl(var(--destructive-depth-hsl)));
  @apply text-white;
}
.btn-juicy-danger:hover {
  filter: brightness(1.1);
}

/* Sky Variant (Info/Time Up) */
.btn-juicy-sky {
  background: linear-gradient(to bottom, hsl(var(--secondary-hsl)), hsl(var(--secondary-depth-hsl)));
  @apply text-white;
}
.btn-juicy-sky:hover {
  filter: brightness(1.1);
}


/* Primary Button (Purple) - Updated to use Juicy style */
.filled-button {
  @apply btn-juicy btn-juicy-primary;
  @apply h-14 px-8 inline-flex;
}

/* Tonal Button (Gray/White) - Kept as is for now, using btn-push */
.tonal-button {
  @apply btn-push bg-white border-slate-200 text-slate-700 rounded-2xl;
  @apply h-12 px-6 inline-flex items-center justify-center;
  @apply font-bold text-base uppercase tracking-wide;
  font-family: var(--font-fredoka);
}
.tonal-button:hover { @apply bg-slate-50; }

/* Disabled Button */
.btn-disabled {
  @apply w-full h-14 rounded-2xl flex items-center justify-center font-bold text-lg uppercase tracking-wide;
  @apply bg-slate-200 text-slate-400 cursor-not-allowed shadow-none border-transparent;
  font-family: var(--font-fredoka);
}

/* Icon Button */
.icon-button {
  @apply p-2 rounded-xl transition-transform active:scale-95 text-slate-400 hover:text-slate-600 hover:bg-slate-100;
}

/* Cards */
/* Clean, flat cards with subtle shadow or border */
.app-card {
  @apply w-full bg-white rounded-3xl p-4 md:p-6;
  @apply border-2 border-slate-100; /* Subtle border */
  @apply shadow-soft hover:shadow-soft-md transition-all active:scale-[0.98];
  @apply flex flex-col justify-center;
}

/* Number Chips (for Keypad/Selection) */
.number-chip {
  @apply w-full aspect-square flex items-center justify-center;
  @apply rounded-2xl bg-white border-2 border-slate-200 text-slate-600;
  @apply text-2xl font-bold shadow-sm transition-all;
  @apply hover:bg-slate-50 active:scale-95 active:bg-slate-100;
  font-family: var(--font-fredoka);
}
.number-chip.selected {
  @apply bg-secondary text-white border-secondary-depth;
}

/* Choice Chips (Tags) */
.choice-chip {
  @apply h-10 px-4 inline-flex items-center gap-2 rounded-xl;
  @apply border-2 border-slate-200 bg-white text-slate-600;
  @apply font-bold text-sm cursor-pointer transition-all;
  @apply active:scale-95;
}
.choice-chip:hover { @apply bg-slate-50; }
.choice-chip.selected {
  @apply bg-secondary/10 border-secondary text-secondary;
}

/* Text Inputs */
.text-field {
  @apply relative w-full;
}
.text-field input {
  @apply w-full h-14 px-4 rounded-2xl bg-slate-100 border-2 border-transparent;
  @apply text-lg font-bold text-slate-700 outline-none transition-all;
  font-family: var(--font-nunito);
}
.text-field input:focus {
  @apply bg-white border-primary ring-0;
}
.text-field label {
  @apply absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold transition-all pointer-events-none;
}
.text-field input:focus + label,
.text-field input:not(:placeholder-shown) + label {
  @apply -top-2 left-3 bg-white px-2 text-xs text-primary scale-90;
}

/* Layout Utilities */
.screen-container {
  @apply flex flex-col flex-1 min-h-0 w-full max-w-md mx-auto relative bg-background;
}
.screen-content {
  @apply flex-1 overflow-y-auto px-4 py-4;
}
.screen-fixed-bottom {
  @apply flex-shrink-0 p-4 bg-background/80 backdrop-blur-sm z-10;
}

/* Scrollbar hiding for cleaner look */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Custom Animations */
@keyframes float-up {
  0%, 100% { transform: translateY(0); opacity: 0.8; }
  50% { transform: translateY(-10px); opacity: 1; }
}

@keyframes wiggle {
  0%, 100% { transform: rotate(-3deg); }
  50% { transform: rotate(3deg); }
}

.animate-float-up {
  animation: float-up 3s ease-in-out infinite;
}

.animate-wiggle {
  animation: wiggle 2s ease-in-out infinite;
}
